/*
 *      editor_plugin.js
 *      
 *      Copyright 2014 Ed Hynan <edhynan@gmail.com>
 *      
 *      This program is free software; you can redistribute it and/or modify
 *      it under the terms of the GNU General Public License as published by
 *      the Free Software Foundation; specifically version 3 of the License.
 *      
 *      This program is distributed in the hope that it will be useful,
 *      but WITHOUT ANY WARRANTY; without even the implied warranty of
 *      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *      GNU General Public License for more details.
 *      
 *      You should have received a copy of the GNU General Public License
 *      along with this program; if not, write to the Free Software
 *      Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
 *      MA 02110-1301, USA.
 */
var SWFPut_video_utility_obj_def=function(){this.loadtime_serial=68719476735&this.unixtime()};SWFPut_video_utility_obj_def.prototype={defprops:{url:"",cssurl:"",iimage:"",width:"240",height:"180",mobiwidth:"0",audio:"false",aspectautoadj:"false",displayaspect:"0",pixelaspect:"0",volume:"50",play:"false",hidebar:"true",disablebar:"false",iimgbg:"true",barheight:"36",quality:"high",allowfull:"true",allowxdom:"false",loop:"false",mtype:"application/x-shockwave-flash",playpath:"",altvideo:"",classid:"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",codebase:"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,115,0",align:"center",preload:"image"},mk_shortcode:function(t,e,i){var a=i||"",s="["+t,n=SWFPut_video_utility_obj_def.prototype.defprops;for(var o in e)void 0!==n[o]&&(s+=" "+o+'="'+e[o]+'"');return s+"]"+a+"[/"+t+"]"},atts_filter:function(t){var e=SWFPut_video_utility_obj_def.prototype.defprops,i={};for(var a in t)void 0!==e[a]&&(i[a]=t[a]);return i},date_now:function(){return Date.now?Date.now():(new Date).getTime()},unixtime:function(){return this.date_now()/1e3},loadtime_serial:0,get_new_putswf_shortcode:function(){var t=new Date,e='[putswf_video url="" iimage="" altvideo=""]',i="[/putswf_video]",a="Edit me please! "+t.toString()+", "+t.getTime()+"ms";return e+a+i},_wp:wp||!1,attachment_data_by_id:function(t,e){var i=t,a={status:0,response:null};this._wp&&this._wp.ajax.send("get-attachment",{data:{id:i}}).done(function(i){a.status=i?!0:null,a.response=i,e&&"function"==typeof e&&e(t,a)}).fail(function(i){a.status=!1,a.response=i,e&&"function"==typeof e&&e(t,a)})},attachments:{},get_attachment_by_id:function(t,e,i){if(void 0===this.attachments.id){if(void 0!==e&&e)return this.attachments.id=e,e;var a=this.attachments,s=i||!1;return this.attachment_data_by_id(t,function(t,e){e.status===!0?a[t]=e.response:a[t]=!1,"function"==typeof s&&s(t,e,a)}),null}return void 0!==e&&e&&(this.attachments.id=e),this.attachments.id}};var SWFPut_video_utility_obj=new SWFPut_video_utility_obj_def(wp||!1),SWFPut_add_button_func=function(t){var e,i,a=100,s=(t.id,SWFPut_video_utility_obj.get_new_putswf_shortcode()),n=SWFPut_putswf_video_inst.get_mce_dat(),o=window.encodeURIComponent(s),r=!1;return n&&n.ed?(i=n.ed,i.selection.setContent(s+"&nbsp;",{format:"text"}),e=setInterval(function(){var t,s=!1,n=i.$;if(r===!1){var d=n(".wpview-wrap");d.each(function(e){var i;return e=d[e],i=e.getAttribute("data-wpview-text"),i&&i.indexOf(o)>=0?(t=e,r=n(e),!1):void 0})}if(r!==!1){var l=r.find("iframe");l&&(i.selection.select(t,!0),i.selection.scrollIntoView(t),r.trigger("click"),s=!0)}(--a<=0||s)&&clearInterval(e)},1500),!1):(alert("Failed to get visual editor"),!1)},SWFPut_get_attachment_by_id=function(t,e,i){return SWFPut_video_utility_obj?SWFPut_video_utility_obj.get_attachment_by_id(t,e,i||!1):!1},SWFPut_cache_shortcode_ids=function(t,e){var i=[t.get("url"),t.get("altvideo"),t.get("iimage")],a=e&&"function"==typeof e?e:!1;_.each(i,function(t){void 0!=t&&_.each(t.split("|"),function(t){var i=t.match(/^[ \t]*([0-9]+)[ \t]*$/);if(i&&i[1]){var s=SWFPut_get_attachment_by_id(i[1],!1,a);if(null!==s&&a!==!1){var n=SWFPut_video_utility_obj.attachments;e(i[1],n[i[1]],n)}}})})},SWFPut_get_iframe_document=function(t,e,i,a){return t=t||"",e=e||"",i=i||"",a=a||"",'<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />'+t+e+'<style>html {background: transparent;padding: 0;margin: 0;}body#wpview-iframe-sandbox {background: transparent;padding: 1px 0 !important;margin: -1px 0 0 !important;}body#wpview-iframe-sandbox:before,body#wpview-iframe-sandbox:after {display: none;content: "";}.fix-alignleft {display: block;min-height: 32px;margin-top: 0;margin-bottom: 0;margin-left: 0px;margin-right: auto; }.fix-alignright {display: block;min-height: 32px;margin-top: 0;margin-bottom: 0;margin-right: 0px;margin-left: auto; }.fix-aligncenter {clear: both;display: block;margin: 0 auto; }.alignright .caption {padding-bottom: 0;margin-bottom: 0.1rem; }.alignleft .caption {padding-bottom: 0;margin-bottom: 0.1rem; }.aligncenter .caption {padding-bottom: 0;margin-bottom: 0.1rem; }</style></head><script type="text/javascript">var evhh5v_sizer_maxheight_off = true;</script><body id="wpview-iframe-sandbox" class="'+i+'">'+a+'</body><script type="text/javascript">( function() {["alignright", "aligncenter", "alignleft"].forEach( function( c, ix, ar ) {var nc = "fix-" + c, mxi = 100,cur = document.getElementsByClassName( c ) || [];for ( var i = 0; i < cur.length; i++ ) {var e = cur[i],mx = 0 + mxi,iv = setInterval( function() {var h = e.height || e.offsetHeight;if ( h && h > 0 ) {var cl = e.getAttribute( "class" );cl = cl.replace( c, nc );e.setAttribute( "class", cl );h += 2; e.setAttribute( "height", h );setTimeout( function() {h -= 2; e.setAttribute( "height", h );}, 250 );clearInterval( iv );} else {if ( --mx < 1 ) {clearInterval( iv );}}}, 50 );}} );}() );</script></html>'};!function(){var t=document.getElementById("evhvid-putvid-input-0");void 0!=t&&(t.onclick="return false;",t.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),t.blur(),SWFPut_add_button_func(t)},!1))}(),function(t,e,i,a){var s=t.media,n=SWFPut_video_utility_obj.defprops,o="undefined"==typeof _wpMediaViewsL10n?{}:_wpMediaViewsL10n,r=t.mce,d={state:[],setIframes:function(t,a,s,n){var o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,r=this;this.getNodes(function(n,d,l){var c=n.dom,u="",h=n.getBody().className||"",p=n.getDoc().getElementsByTagName("head")[0];tinymce.each(c.$('link[rel="stylesheet"]',p),function(t){t.href&&-1===t.href.indexOf("skins/lightgray/content.min.css")&&-1===t.href.indexOf("skins/wordpress/wp-content.css")&&(u+=c.getOuterHTML(t))}),setTimeout(function(){function p(){var t,i;m.contentWindow&&(t=e(m),i=e(v.body).height(),t.height()!==i&&(t.height(i),n.nodeChanged()))}function f(){v.body.className=n.getBody().className}var m,v,_,w;if(l.innerHTML="",m=c.add(l,"iframe",{src:tinymce.Env.ie?'javascript:""':"",frameBorder:"0",allowTransparency:"true",scrolling:"no","class":"wpview-sandbox",style:{width:"100%",display:"block"}}),c.add(l,"div",{"class":"wpview-overlay"}),v=m.contentWindow.document,v.open(),v.write(SWFPut_get_iframe_document(t,u,h,a)),v.close(),e(m.contentWindow).on("load",p),o){var g=v;_=new o(i.debounce(p,100)),_.observe(g,{attributes:!0,childList:!0,subtree:!0}),e(d).one("wp-mce-view-unbind",function(){_.disconnect()})}else for(w=1;6>w;w++)setTimeout(p,700*w);n.on("wp-body-class-change",f),e(d).one("wp-mce-view-unbind",function(){n.off("wp-body-class-change",f)}),s&&s.call(r,n,d,l)},50)},n)},marker_comp_prepare:function(t){var e,i=/[ \t]*data-mce[^=]*="[^"]*"/g,a=/[ \t]{2,}/g;return e=t.substr(0).replace(i,""),e&&(e=e.replace(a," ")),e||t},replaceMarkers:function(){this.getMarkers(function(t,i){var a=d.marker_comp_prepare(e(i).html()),s=d.marker_comp_prepare(this.text);return this.loader||a===s?void t.dom.replace(t.dom.createFragment('<div class="wpview-wrap" data-wpview-text="'+this.encodedText+'" data-wpview-type="'+this.type+'"><p class="wpview-selection-before">\xa0</p><div class="wpview-body" contenteditable="false"><div class="wpview-content wpview-type-'+this.type+'"></div></div><p class="wpview-selection-after">\xa0</p></div>'),i):void t.dom.setAttrib(i,"data-wpview-marker",null)})},match:function(e){var i=/\[(\[?)(putswf_video)(?![\w-])([^\]\/]*(?:\/(?!\])[^\]\/]*)*?)(?:(\/)\]|\](?:([^\[]*(?:\[(?!\/\2\])[^\[]*)*)(\[\/\2\]))?)(\]?)/g,a=i.exec(e);if(a){var s,n;return s=' capencoded="'+encodeURIComponent(a[5])+'"',n=a[3].indexOf(" capencoded="),n=0>n?a[3]+s:a[3].replace(/ capencoded="[^"]*"/g,s),{index:a.index,content:a[0],options:{shortcode:new t.shortcode({tag:a[2],attrs:n,type:a[6]?"closed":"single",content:a[5]})}}}},edit:function(e,a){var s=t.media[this.type],n=s.edit(e);this.pausePlayers&&this.pausePlayers(),i.each(this.state,function(t){n.state(t).on("update",function(t){var e=s.shortcode(t).string();a(e)})}),n.on("close",function(){n.detach()}),n.open()}},l=i.extend({},d,{action:"parse_putswf_video_shortcode",initialize:function(){var t=this;this.fetch(),this.getEditors(function(e){e.on("wpview-selected",function(){t.pausePlayers()})})},fetch:function(){var i=this,a=SWFPut_video_utility_obj.atts_filter(this.shortcode.attrs.named),s=SWFPut_video_utility_obj.mk_shortcode(this.shortcode.tag,a,this.shortcode.content);this.shortcode.string();t.ajax.send(this.action,{data:{post_ID:e("#post_ID").val()||0,type:this.shortcode.tag,shortcode:s}}).done(function(t){i.render(t)}).fail(function(t){i.url?i.removeMarkers():i.setError(t.message||t.statusText,"admin-media")})},stopPlayers:function(t){var i=t;this.getNodes(function(a,s,n){var o,r,d=e("iframe.wpview-sandbox",n).get(0);if(d&&(r=d.contentWindow)&&r.evhh5v_sizer_instances){try{for(o in r.evhh5v_sizer_instances){var l=r.evhh5v_sizer_instances[o],c=l.va_o||!1,u=l.o||!1,h="pause"===t?"pause":"stop";c&&"function"==typeof c[h]&&c[h](),u&&"function"==typeof u[h]&&u[h]()}}catch(p){p.message}"remove"===i&&(d.contentWindow=null,d=null)}})},pausePlayers:function(){this.stopPlayers&&this.stopPlayers("pause")}});r.views.register("putswf_video",i.extend({},l,{state:["putswf_video-details"]})),s.model.putswf_postMedia=a.Model.extend({SWFPut_cltag:"media.model.putswf_postMedia",initialize:function(t){if(this.attachment=this.initial_attrs=!1,void 0!==t&&void 0!==t.shortcode){var e=this,i=t.shortcode,a=/^[ \t]*([^ \t]*(.*[^ \t])?)[ \t]*$/;if(this.initial_attrs=t,this.poster="",this.flv="",this.html5s=[],i.iimage){var s=a.exec(i.iimage);this.poster=s&&s[1]?s[1]:i.iimage}if(i.url){var s=a.exec(i.url);this.flv=s&&s[1]?s[1]:i.url}if(i.altvideo)for(var n=i.altvideo,o=n.split("|"),r=0;r<o.length;r++){var s=a.exec(o[r]);s&&s[1]&&this.html5s.push(s[1])}SWFPut_cache_shortcode_ids(i,function(t,i,a){var s=""+t;if(e.initial_attrs.id_cache=a,void 0===e.initial_attrs.id_array&&(e.initial_attrs.id_array=[]),e.initial_attrs.id_array.push(t),e.poster===s)e.poster=a[t];else if(e.flv===s)e.flv=a[t];else if(null!==e.html5s)for(var n=0;n<e.html5s.length;n++)e.html5s[n]===s&&(e.html5s[n]=a[t])})}},poster:null,flv:null,html5s:null,setSource:function(e){this.attachment=e,this.extension=e.get("filename").split(".").pop(),this.get("src")&&this.extension===this.get("src").split(".").pop()&&this.unset("src"),i.contains(t.media.view.settings.embedExts,this.extension)?this.set(this.extension,this.attachment.get("url")):this.unset(this.extension);try{var a=e.get("putswf_attach_all");a&&a.toArray().length<1&&delete this.attachment.putswf_attach_all}catch(s){}},changeAttachment:function(e){var a=this;this.setSource(e),this.unset("src"),i.each(i.without(t.media.view.settings.embedExts,this.extension),function(t){a.unset(t)})},cleanup_media:function(){for(var t=[],e=!1,i=!1,a=!1,s=0;s<this.html5s.length;s++){var n=this.html5s[s];if("object"==typeof n){var o=n.subtype?n.subtype.split("-").pop():n.filename?n.filename.split(".").pop():!1;switch(o){case"mp4":case"m4v":case"mv4":e=n;break;case"ogg":case"ogv":case"vorbis":i=n;break;case"webm":case"wbm":case"vp8":case"vp9":a=n}}else t.push(n)}e&&t.push(e),i&&t.push(i),a&&t.push(a),this.html5s=t},get_poster:function(t){return t=t||!1,t&&null!==this.poster?"object"==typeof this.poster?this.poster.url:this.poster:null!==this.poster?"object"==typeof this.poster?""+this.poster.id:this.poster:""},get_flv:function(t){return t=t||!1,t&&null!==this.flv?"object"==typeof this.flv?this.flv.url:this.flv:null!==this.flv?"object"==typeof this.flv?""+this.flv.id:this.flv:""},get_html5s:function(t){var e="";if(t=t||!1,null===this.html5s)return e;for(var i=0;i<this.html5s.length;i++){var a=this.html5s[i],s="";""!==e&&(s+=" | "),s+="object"==typeof a?t?a.url:""+a.id:a,e+=s}return e},putswf_postex:function(){}}),s.view.MediaFrame.Putswf_mediaDetails=s.view.MediaFrame.Select.extend({defaults:{id:"putswf_media",url:"",menu:"media-details",content:"media-details",toolbar:"media-details",type:"link",priority:121},SWFPut_cltag:"media.view.MediaFrame.Putswf_mediaDetails",initialize:function(t){this.DetailsView=t.DetailsView,this.cancelText=t.cancelText,this.addText=t.addText,this.media=new s.model.putswf_postMedia(t.metadata),this.options.selection=new s.model.Selection(this.media.attachment,{multiple:!0}),s.view.MediaFrame.Select.prototype.initialize.apply(this,arguments)},bindHandlers:function(){var t=this.defaults.menu;s.view.MediaFrame.Select.prototype.bindHandlers.apply(this,arguments),this.on("menu:create:"+t,this.createMenu,this),this.on("content:render:"+t,this.renderDetailsContent,this),this.on("menu:render:"+t,this.renderMenu,this),this.on("toolbar:render:"+t,this.renderDetailsToolbar,this)},renderDetailsContent:function(){var t=this.state().media.attachment,e=new this.DetailsView({controller:this,model:this.state().media,attachment:t}).render();this.content.set(e)},renderMenu:function(t){var e=this.lastState(),i=e&&e.id,a=this;t.set({cancel:{text:this.cancelText,priority:20,click:function(){i?a.setState(i):a.close()}},separateCancel:new s.View({className:"separator",priority:40})})},setPrimaryButton:function(t,e){this.toolbar.set(new s.view.Toolbar({controller:this,items:{button:{style:"primary",text:t,priority:80,click:function(){var t=this.controller;e.call(this,t,t.state()),t.setState(t.options.state),t.reset()}}}}))},renderDetailsToolbar:function(){this.setPrimaryButton(o.update,function(t,e){t.close(),e.trigger("update",t.media.toJSON())})},renderReplaceToolbar:function(){this.setPrimaryButton(o.replace,function(t,e){var i=e.get("selection").single();t.media.changeAttachment(i),e.trigger("replace",t.media.toJSON())})},renderAddSourceToolbar:function(){this.setPrimaryButton(this.addText,function(t,e){var i=e.get("selection").single();t.media.setSource(i),e.trigger("add-source",t.media.toJSON())})}}),s.view.SWFPutDetails=s.view.Settings.AttachmentDisplay.extend({SWFPut_cltag:"media.view.SWFPutDetails",initialize:function(){i.bindAll(this,"success"),this.players=[],this.listenTo(this.controller,"close",s.putswf_mixin.unsetPlayers),this.on("ready",this.setPlayer),this.on("media:setting:remove",s.putswf_mixin.unsetPlayers,this),this.on("media:setting:remove",this.render),this.on("media:setting:remove",this.setPlayer),this.events=i.extend(this.events,{"click .remove-setting":"removeSetting","click .add-media-source":"addSource"}),s.view.Settings.AttachmentDisplay.prototype.initialize.apply(this,arguments)},prepare:function(){var t=this.model;return i.defaults({model:t},this.options)},removeSetting:function(t){var i,a=e(t.currentTarget).parent();i=a.find("input").data("setting"),i&&(this.model.unset(i),this.trigger("media:setting:remove",this)),a.remove()},setTracks:function(){},addSource:function(t){this.controller.lastMime=e(t.currentTarget).data("mime"),this.controller.setState("add-"+this.controller.defaults.id+"-source")},setPlayer:function(){},setMedia:function(){return this},success:function(){},render:function(){var t=this;return s.view.Settings.AttachmentDisplay.prototype.render.apply(this,arguments),setTimeout(function(){t.resetFocus()},10),this.settings=i.defaults({success:this.success},n),this.setMedia()},resetFocus:function(){this.$(".putswf_video-details-iframe").scrollTop(0)}},{instances:0,prepareSrc:function(t){var a=s.view.SWFPutDetails.instances++;return i.each(e(t).find("source"),function(t){t.src=[t.src,t.src.indexOf("?")>-1?"&":"?","_=",a].join("")}),t}}),s.view.Putswf_videoDetails=s.view.SWFPutDetails.extend({className:"putswf_video-mediaframe-details",template:s.template("putswf_video-details"),SWFPut_cltag:"media.view.Putswf_videoDetails",initialize:function(){i.bindAll(this,"success"),this.players=[],this.listenTo(this.controller,"close",t.media.putswf_mixin.unsetPlayers),this.on("ready",this.setPlayer),this.on("media:setting:remove",t.media.putswf_mixin.unsetPlayers,this),this.on("media:setting:remove",this.render),this.on("media:setting:remove",this.setPlayer),this.events=i.extend(this.events,{"click .add-media-source":"addSource"}),this.init_data=arguments&&arguments[0]?arguments[0]:!1,s.view.SWFPutDetails.prototype.initialize.apply(this,arguments)},setMedia:function(){var t=this.$(".evhh5v_vidobjdiv"),e=this.$(".wp-caption"),i=t||e,a=i.find("video")||i.find("canvas")||i.find("object");return a?(i.show(),this.media=s.view.SWFPutDetails.prepareSrc(i.get(0))):(i.hide(),this.media=!1),this}}),s.controller.Putswf_videoDetails=s.controller.State.extend({defaults:{id:"putswf_video-details",toolbar:"putswf_video-details",title:"SWFPut Video Details",content:"putswf_video-details",menu:"putswf_video-details",router:!1,priority:60},SWFPut_cltag:"media.controller.Putswf_videoDetails",initialize:function(t){this.media=t.media,s.controller.State.prototype.initialize.apply(this,arguments)},setSource:function(t){this.attachment=t,this.extension=t.get("filename").split(".").pop()}}),s.view.MediaFrame.Putswf_videoDetails=s.view.MediaFrame.Putswf_mediaDetails.extend({defaults:{id:"putswf_video",url:"",menu:"putswf_video-details",content:"putswf_video-details",toolbar:"putswf_video-details",type:"link",title:"SWFPut Video -- Media",priority:120},SWFPut_cltag:"media.view.MediaFrame.Putswf_videoDetails",initialize:function(t){this.media=t.media,t.DetailsView=s.view.Putswf_videoDetails,t.cancelText="Cancel Edit",t.addText="Add Video",s.view.MediaFrame.Putswf_mediaDetails.prototype.initialize.call(this,t)},bindHandlers:function(){s.view.MediaFrame.Putswf_mediaDetails.prototype.bindHandlers.apply(this,arguments),this.on("toolbar:render:replace-putswf_video",this.renderReplaceToolbar,this),this.on("toolbar:render:add-putswf_video-source",this.renderAddSourceToolbar,this),this.on("toolbar:render:putswf_poster-image",this.renderSelectPosterImageToolbar,this)},createStates:function(){this.states.add([new s.controller.Putswf_videoDetails({media:this.media}),new s.controller.MediaLibrary({type:"video",id:"replace-putswf_video",title:"Replace Media",toolbar:"replace-putswf_video",media:this.media,menu:"putswf_video-details"}),new s.controller.MediaLibrary({type:"video",id:"add-putswf_video-source",title:"Add Media",toolbar:"add-putswf_video-source",media:this.media,multiple:!0,menu:"putswf_video-details"}),new s.controller.MediaLibrary({type:"image",id:"select-poster-image",title:o.SelectPosterImageTitle?o.SelectPosterImageTitle:"Set Initial (poster) Image",toolbar:"putswf_poster-image",media:this.media,menu:"putswf_video-details"})])},renderSelectPosterImageToolbar:function(){this.setPrimaryButton("Select Poster Image",function(t,e){var i=e.get("selection").single();i.attributes.putswf_action="poster",t.media.changeAttachment(i),e.trigger("replace",t.media.toJSON())})},renderReplaceToolbar:function(){this.setPrimaryButton("Replace Video",function(t,e){var i=e.get("selection").single();i.attributes.putswf_action="replace_video",t.media.changeAttachment(i),e.trigger("replace",t.media.toJSON())})},renderAddSourceToolbar:function(){this.setPrimaryButton(this.addText,function(t,e){var i=e.get("selection").single(),a=e.get("selection")||!1;i.attributes.putswf_action="add_video",a&&a.multiple&&(i.attributes.putswf_attach_all=a),t.media.setSource(i),e.trigger("add-source",t.media.toJSON())})}}),t.media.putswf_mixin={putswfSettings:n,SWFPut_cltag:"wp.media.putswf_mixin",removeAllPlayers:function(){},removePlayer:function(){},unsetPlayers:function(){}},t.media.putswf_video={defaults:n,SWFPut_cltag:"wp.media.putswf_video",_mk_shortcode:SWFPut_video_utility_obj.mk_shortcode,_atts_filter:SWFPut_video_utility_obj.atts_filter,edit:function(e){var a,n,o,r=t.shortcode.next("putswf_video",e).shortcode;s.view.MediaFrame;return n=r.attrs.named,n.content=r.content,n.shortcode=r,o={frame:"putswf_video",state:"putswf_video-details",metadata:i.defaults(n,this.defaults)},a=new s.view.MediaFrame.Putswf_videoDetails(o),s.frame=a,a},shortcode:function(e){var i,a,s;return a=e.shortcode.tag,i=e.content,s=t.media.putswf_video._atts_filter(e),new t.shortcode({tag:a,attrs:s,content:i})}}}(wp,jQuery,_,Backbone);